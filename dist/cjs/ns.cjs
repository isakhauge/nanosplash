"use strict";var m=Object.defineProperty;var v=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>(v(n,typeof e!="symbol"?e+"":e,t),t);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const w="3.0.1",u=class u{constructor(){o(this,"id");o(this,"element");this.element=y(),this.element.id=this.id=u.generateGUID()}static generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}getTextElement(){var e,t;return((t=(e=this.getElement())==null?void 0:e.firstElementChild)==null?void 0:t.firstElementChild)??null}getId(){return this.id}getElement(){return this.element}setText(e){return this.getTextElement().innerText=e,e.length>0?this.showText():this.hideText(),this}showText(){return S(this.getTextElement()),this}hideText(){return E(this.getTextElement()),this}delete(){return this.id=null,this.element!==null&&(this.element.innerHTML="",this.element.remove(),this.element=null),this.element===null}};o(u,"NSClass","ns"),o(u,"NSHostClass","nsh");let a=u;function g(n){return(e=>(()=>e.firstChild)(e.innerHTML=n))(document.createElement("div"))}function y(){return g('<div class=ns><div class=nsc><div class=nst></div><div class=nss><svg viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none></circle></svg></div></div></div>')}function b(n,e){e.children.length>0?e.insertBefore(n,e.children.item(0)):e.append(n)}function p(n){n==null||n.classList.add(a.NSHostClass)}function x(n){n==null||n.classList.remove(a.NSHostClass)}function S(n){n.style.display="flex"}function E(n){n.style.display="none"}function h(n){switch(typeof n){case"object":const e=n===document.body,t=n instanceof Element;if(e||t)return n;throw new Error("Reference is an object but not an Element instance.");case"string":return document.querySelector(n);default:throw new Error("Reference is not an object or a string.")}}function I(n,e){x(n.parentElement),p(e),b(n,e)}function f(n){const e=Array.from(n.children||[]),t=c.getInstance();let s=null;const r=e.length;for(let l=0;l<r;l++){const d=e[l];if(d.classList.contains(a.NSClass)){s=t.nsQueue.get(d.id)??null;break}}return s}const k=`.ns,.nsh:before{width:100%;height:100%}.ns,.nsh:before{top:0;left:0}.nsc,.ns{display:flex;justify-content:center;align-items:center}.nsh{--color: DarkSlateGray;--size: 20px;--relSize: calc(var(--size) * .9);--font: "Helvetica", "Arial", sans-serif;--weight: 400;--bg: rgba(255, 255, 255, .8);--zIdx: 999999999;--blur: blur(10px)}.nsh{position:relative;z-index:var(--zIdx)}.nsh:before{position:absolute;background-color:var(--bg);content:"";backdrop-filter:var(--blur);-webkit-backdrop-filter:var(--blur);z-index:calc(var(--zIdx) + 1);border-radius:inherit}body.nsh{height:100vh}.ns{position:absolute;z-index:calc(var(--zIdx) + 2)}.nsc{filter:drop-shadow(0 0 .1rem rgba(211,211,211,.5))}.nst{color:var(--color);font-size:var(--size);font-family:var(--font);font-weight:var(--weight);margin-right:var(--relSize);text-shadow:0 0 .06rem rgba(47,79,79,.25)}.nss{display:block;width:var(--relSize);height:var(--relSize)}.nss>svg{animation:Rotate 2s linear infinite;position:relative;width:inherit;height:inherit;stroke-width:8}.nss .path{stroke:var(--color);stroke-linecap:round;animation:Dash 1.5s ease-in-out infinite}@keyframes Rotate{to{transform:rotate(360deg)}}@keyframes Dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}
`;class T{constructor(){o(this,"_queue");this._queue=[]}enqueue(e){this._queue.push(e)}dequeue(){return this._queue.shift()}peek(){return this._queue[0]}get size(){return this._queue.length}isEmpty(){return this.size===0}get(e){return this._queue.find(t=>t.getId()===e)}has(e){return this.get(e)!==void 0}delete(e){const t=this._queue.findIndex(s=>s.getId()===e);if(t!==-1)return this._queue.splice(t,1)[0]}}const i=class i{constructor(){o(this,"version");o(this,"nsQueue");this.version=w,this.nsQueue=new T,i.addStyle()}static addStyle(){const e=g(`<style>${k}</style>`);document.body.append(e)}static getInstance(){return i.instance||(i.instance=new i),i.instance}static assignToWindow(){Object.defineProperty(window,i.WindowAccessorKey,{value:i.getInstance(),writable:!1})}static start(){i.assignToWindow(),window.addEventListener("load",()=>{window[i.WindowAccessorKey]instanceof i||i.assignToWindow()})}createNS(e){const t=new a;return t.setText(e||""),this.nsQueue.enqueue(t),t}cleanAndRemoveFromDOM(e){var t;if(e){const s=((t=e.getElement())==null?void 0:t.parentElement)??null;return s&&x(s),e.delete()}return!1}deleteNS(e){const t=this.nsQueue.delete(e);return t?this.cleanAndRemoveFromDOM(t):!1}show(e){return this.showInside(document.body,e)}showInside(e,t){const s=h(e);if(s){let r=f(s);r||(r=this.createNS());const l=r.getElement();return l&&I(l,s),r.setText(String(t)).getId()}return null}hide(){const e=this.nsQueue.dequeue();return e?(this.cleanAndRemoveFromDOM(e),e.getId()):null}hideAll(){let e=this.nsQueue.dequeue();for(;e;)this.cleanAndRemoveFromDOM(e),e=this.nsQueue.dequeue()}hideId(e){return this.nsQueue.has(e)&&this.deleteNS(e)?e:null}hideInside(e){const t=h(e);if(!t)return null;const s=f(t);if(!s)return null;const r=s.getId();return r&&this.deleteNS(r)?r:null}};o(i,"WindowAccessorKey","ns"),o(i,"instance");let c=i;const z={Service:c};exports.Service=c;exports.default=z;
